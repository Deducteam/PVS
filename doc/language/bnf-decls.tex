\begin{bnf}

\production{LibDecl}
{\hlink{Ids}\ \lit{:} \lit{LIBRARY} \opt{\lit{=}} \hlink{String}}

\production{TheoryDecl}
{\hlink{Ids}\opt{\hlink{DeclFormals}}\ \lit{:} \lit{THEORY} \lit{=} \hlink{TheoryDeclName}}

\production{TypeDecl}
{\hlink{Id}\opt{\hlink{DeclFormals}}\ \opt{\{\lit{,} \hlink{Ids}\} \choice \hlink{Bindings}} \lit{:} \\[-0.1in]
& & \quad \{\lit{TYPE} \choice \lit{NONEMPTY\_TYPE} \choice \lit{TYPE+}\} \\[-0.1in]
& & \quad \opt{\brc{\lit{=} \choice \lit{FROM}} \hlink{TypeExpr} \opt{\lit{CONTAINING} \hlink{Expr}}}}

\production{VarDecl}
{\hlink{IdOps}\opt{\hlink{DeclFormals}}\ \lit{:} \lit{VAR} \hlink{TypeExpr}}

\production{ConstDecl}
{\hlink{IdOp}\opt{\hlink{DeclFormals}}\ \opt{\{\lit{,} \hlink{IdOps} \} \choice \ite{\hlink{Bindings}}} \lit{:} \hlink{TypeExpr} \opt{\lit{=} \hlink{Expr}}}

\production{RecursiveDecl}
{\hlink{IdOp}\opt{\hlink{DeclFormals}}\ \opt{\{\lit{,} \hlink{IdOps} \} \choice \ite{\hlink{Bindings}}} \lit{:} \lit{RECURSIVE} \\[-0.1in]
& & \quad \hlink{TypeExpr} \lit{=} \hlink{Expr} \lit{MEASURE} \hlink{Expr} \opt{\lit{BY} \hlink{Expr}}}

\production{MacroDecl}
{\hlink{IdOp}\opt{\hlink{DeclFormals}}\ \opt{\{\lit{,} \hlink{IdOps} \} \choice
\ite{\hlink{Bindings}}} \lit{:} \lit{MACRO} \\[-0.1in]
& & \quad \hlink{TypeExpr} \lit{=} \hlink{Expr}}

\production{InductiveDecl}
{\hlink{IdOp}\opt{\hlink{DeclFormals}}\ \opt{\{\lit{,} \hlink{IdOps} \} \choice \ite{\hlink{Bindings}}} \lit{:} \lit{INDUCTIVE}  \\[-0.1in]
& & \quad \hlink{TypeExpr} \lit{=} \hlink{Expr}}

\production{CoInductiveDecl}
{\hlink{IdOp}\opt{\hlink{DeclFormals}}\ \opt{\{\lit{,} \hlink{IdOps} \} \choice \ite{\hlink{Bindings}}} \lit{:} \lit{COINDUCTIVE}  \\[-0.1in]
& & \quad \hlink{TypeExpr} \lit{=} \hlink{Expr}}

\production{FormulaDecl}
{\hlink{Ids}\opt{\hlink{DeclFormals}}\ \lit{:} \hlink{FormulaName} \hlink{Expr}}

\production{Judgement}
{\hlink{SubtypeJudgement} \choice \hlink{ConstantJudgement}}

\production{SubtypeJudgement}
{\opt{\hlink{IdOp}\opt{\hlink{DeclFormals}} \lit{:}} \lit{JUDGEMENT} \ites{\hlink{TypeExpr}}{,} \lit{SUBTYPE\_OF} \hlink{TypeExpr}}

\production{ConstantJudgement}
{\opt{\hlink{IdOp}\opt{\hlink{DeclFormals}} \lit{:}} \opt{\lit{RECURSIVE}}
\lit{JUDGEMENT} \ites{\hlink{ConstantReference}}{,}  \\[-0.1in]
& & \quad \lit{HAS\_TYPE} \hlink{TypeExpr}}

\production{ConstantReference}
{\hlink{Name} \rep{\hlink{Bindings}}\\[-0.1in]
& & \choice \lit{FORALL} \hlink{LambdaBindings} \lit{:} Expr
}

\production{Conversion}
{\brc{\lit{CONVERSION} \choice \lit{CONVERSION+} \choice
\lit{CONVERSION-}} \ites{\hlink{Expr}}{,}}

\production{AutoRewriteDecl}
{\brc{\lit{AUTO\_REWRITE} \choice \lit{AUTO\_REWRITE+} \choice
\lit{AUTO\_REWRITE-}} \\[-0.1in]
& & \quad \ites{\hlink{RewriteName}}{,}}

\production{RewriteName}
{\hlink{Name} \opt{\lit{!} \opt{\lit{!}}} \opt{\lit{:}
\brc{\hlink{TypeExpr} \choice \hlink{FormulaName}}}}

\production{DeclFormals}
{\lit{[}\ \ites{\hlink{DeclFormal}}{,} \lit{]}}

\production{DeclFormal}
{TheoryFormalType}
%{\opt{\hlink{TheoryFormalDecl}}

\production{Bindings}
{\lit{(} \ites{\hlink{Binding}}{,} \lit{)}}

\production{Binding}
{\hlink{TypedId} \choice \{ \lit{(} \hlink{TypedIds} \lit{)} \} }

\production{TypedIds}
{\hlink{IdOps} \opt{\lit{:} \hlink{TypeExpr}} \opt{\lit{|} \hlink{Expr}}}

\production{TypedId}
{\hlink{IdOp} \opt{\lit{:} \hlink{TypeExpr}} \opt{\lit{|} \hlink{Expr}}}

\end{bnf}
